<div class="container-fluid vh-100 d-flex flex-column justify-content-center align-items-center text-center px-3">
  <div class="card shadow-lg bg-light game-card">
    <div class="card-body p-4">

      <!-- Header -->
      <div class="d-flex align-items-center justify-content-between mb-3">
        <div class="text-start">
          <h4 class="mb-0">Game</h4>

          @if (gameId === 0 || !gameToken) {
            <div class="text-muted small d-flex align-items-center gap-2">
              <span class="searching-text">Finding an opponent...</span>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </div>
          } @else {
            <div class="text-muted small">
              Matched
            </div>
          }
        </div>

        @if (gameId === 0 || !gameToken) {
          <div class="badge rounded-pill text-bg-secondary">MATCHMAKING</div>
        } @else {
          <div class="badge rounded-pill text-bg-success">LIVE</div>
        }
      </div>

      <!-- Board -->
      <div class="board-shell border rounded-3 bg-white shadow-sm">
        <div class="board-placeholder">
          <app-chessboard #board></app-chessboard>
        </div>
      </div>

      <!-- Resign -->
      <div class="d-flex justify-content-end mt-3">
      @if (!isOver) {
        <button
          class="btn btn-outline-danger m-1"
          (click)="resign()"
          [disabled]="gameId === 0 || !gameToken"
        >
          <span>Resign</span>
        </button>
      }
        <button
          class="btn btn-outline-primary m-1"
          (click)="leave()"
        >
          <span>Leave</span>
        </button>
      @if (isOver) {
        <button
          class="btn btn-outline-success m-1"
          (click)="analyze()"
        >
          <span>Analyze</span>
        </button>
      }
      </div>

      @if (gameId === 0 || !gameToken) {
        <div class="mt-3 text-muted small">
          Keep this tab open. You will be matched automatically.
        </div>
      }

      <div class="d-flex mt-3">
      </div>
    </div>
  </div>
</div>
